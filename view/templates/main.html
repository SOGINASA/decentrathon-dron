<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Drone Control Dashboard</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='main.css')}}"/>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
</head>
<body>
    <header>
        <nav>
          <div class="logo">DroneControl</div>
          <ul class="nav-links">
            <li><a href="/" class="active">Мониторинг</a></li>
            <li><a href="#">Миссии</a></li>
            <li><a href="#">Логи</a></li>
            <li><a href="#">Дроны</a></li>
            <li><a href="#">Пилоты</a></li>
            {% if current_user.is_authenticated %}
              <li><a href="{{ url_for('auth.logout') }}">Выход</a></li>
            {% else %}
              <li><a href="{{ url_for('auth.login') }}">Вход</a></li>
              <li><a href="{{ url_for('auth.register') }}">Регистрация</a></li>
            {% endif %}
          </ul>
        </nav>
      </header>

  <main>
    <!-- Видео-панель -->
    <section class="video-panel">
      <video
        id="cameraStream"
        autoplay
        muted
        playsinline
        src="http://<RASPBERRY_IP>:8080/stream.mjpg"
      ></video>
    </section>

    <!-- Инфо-панель -->
    <section class="info-panel">
      <div class="telemetry">
        <h3>Телеметрия</h3>
        <ul>
          <li>Высота: <span id="altitude">—</span> м</li>
          <li>Скорость: <span id="speed">—</span> м/с</li>
          <li>Заряд: <span id="battery">—</span>%</li>
          <li>Координаты: <span id="coords">—</span></li>
        </ul>
      </div>

      <div class="controls">
        <h3>Управление</h3>
        <button class="toggle-btn" id="toggleInput">Использовать клавиатуру</button>
        <div class="btn-row">
          <button data-cmd="TAKE_OFF">Взлёт</button>
          <button data-cmd="LAND">Посадка</button>
        </div>
        <div class="btn-row">
          <button data-cmd="UP">Вверх</button>
          <button data-cmd="DOWN">Вниз</button>
        </div>
        <div class="btn-row">
          <button data-cmd="LEFT">Влево</button>
          <button data-cmd="RIGHT">Вправо</button>
        </div>
      </div>
    </section>

    <!-- Располагаем карту внизу страницы -->
    <section id="map" class="map-panel map-fullscreen"></section>
  </main>

  <footer>&copy; 2025 Drone Hackathon by <span style="color: #e63946;"><b>ITshechka</b></span></footer>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <!-- Socket.IO клиент -->
  <script src="https://cdn.socket.io/4.7.0/socket.io.min.js"></script>
  <!-- Основной скрипт -->
  <script src="{{ url_for('static', filename='main.js')}}"></script>
</body>
</html>
